{
  "version": 3,
  "sources": ["../../../node_modules/.pnpm/vue-script-xx@0.2.5/node_modules/vue-script-xx/src/utils.ts", "../../../node_modules/.pnpm/vue-script-xx@0.2.5/node_modules/vue-script-xx/src/index.ts"],
  "sourcesContent": ["\nexport default class {\n\n    static isUndefined (x: any): boolean {\n        return x === undefined\n    }\n\n    static pick (o: Record<string, any>, props: Array<string | number>): Record<string, any> {\n        let x: Record<string, any> = {}\n        props.forEach(k => { x[k] = o[k] })\n        return x\n    }\n\n    static omit (o: Record<string, any>, props: Array<string | number>) {\n        let x: Record<string, any> = {}\n        Object.keys(o).forEach((k) => {\n            if (props.indexOf(k) === -1) x[k] = o[k]\n        })\n        return x\n    }\n\n    static omitBy (o: Record<string, any>, pred: CallableFunction) {\n        let x: Record<string, any> = {}\n        Object.keys(o).forEach((k) => {\n            if (!pred(o[k])) x[k] = o[k]\n        })\n        return x\n    }\n\n    // custom defaults function suited to our specific purpose\n    static defaults (o: Record<string, any>, ...sources: Array<Record<string, any>>) {\n        sources.forEach((s) => {\n            Object.keys(s).forEach((k) => {\n                if (this.isUndefined(o[k]) || o[k] === '') o[k] = s[k]\n            })\n        })\n    }\n\n}\n", "import { App, h } from 'vue'\nimport Utils from './utils'\n\nclass VueScriptX {\n    installed = false\n    promise = Promise.resolve()\n    \n    loaded: Record<string, Promise<any>> = {}\n    props: Array<string> = ['unload', 'src', 'type', 'async', 'integrity', 'text', 'crossorigin']\n    \n    install (app: App): void {\n        app.config.globalProperties.$scriptx = this\n\n        let self = this\n        if (self.installed) return\n        \n        app.component('scriptx', {\n            props: self.props,\n            // Uses render method with <slot>s, see: https://v3.vuejs.org/guide/render-function.html\n            render () {\n                return h(\n                    'div',\n                    { style: 'display:none' },\n                    this.$slots.default ? this.$slots.default(): undefined,\n                )\n            },\n            mounted () {\n                let parent = this.$el.parentElement\n                if (!this.src) {\n                    self.promise = self.promise\n                    .then(() => {\n                        let script = document.createElement('script')\n                        let el = this.$el.innerHTML\n                        el = el.replace(/&lt;/gi, '<').replace(/&gt;/gi, '>').replace(/&amp;/gi, '&')\n                        script.type = 'text/javascript'\n                        script.appendChild(document.createTextNode(el))\n                        parent.appendChild(script)\n                        this.$emit('loaded') // any other proper way to do this or emit error?\n                    })\n                } else {\n                    let opts = Utils.omitBy(Utils.pick(this, self.props), Utils.isUndefined)\n                    opts.parent = parent\n                    // this syntax results in an implicit return\n                    let load = () => {\n                        self.load (this.src, opts)\n                        .then(\n                            () => this.$emit('loaded'),\n                            (err: any) => this.$emit('error', err)\n                        )\n                    }\n                    if (Utils.isUndefined(this.async) || this.async === 'false')\n                        self.promise = self.promise.then(load) // serialize execution\n                    else\n                        load() // inject immediately\n                }\n                this.$nextTick(() => {\n                    this.$el.parentElement.removeChild(this.$el)\n                    // NOTE: this.$el.remove() may be used, but IE sucks, see: https://github.com/taoeffect/vue-script2/pull/17\n                })\n            },\n            unmounted () {\n                if (this.unload) {\n                    new Function(this.unload)() // eslint-disable-line\n                    delete self.loaded[this.src]\n                }\n            }\n        })\n        self.installed = true\n    }\n    \n    load (src: string, opts: Record<string, any> = { parent: document.head }): Promise<any> {\n        if (!this.loaded[src]) {\n            this.loaded[src] = new Promise((resolve, reject) => {\n                let script = document.createElement('script')\n\n                // omit the special options that VueScriptX supports\n                Utils.defaults(script, Utils.omit(opts, ['unload', 'parent']), { type: 'text/javascript' })\n\n                // async may not be used with 'document.write'\n                script.async = false\n                script.src = src\n\n                // crossorigin in HTML and crossOrigin in the DOM per HTML spec\n                if (opts.crossorigin) {\n                    script.crossOrigin = opts.crossorigin\n                }\n\n                // handle onload and onerror\n                script.onload = () => resolve(src)\n                script.onerror = () => reject(new Error(src))\n                opts.parent.appendChild(script)\n            })\n        }\n        return this.loaded[src]\n    }\n\n}\n\ndeclare module '@vue/runtime-core' {\n\n    interface ComponentCustomProperties {\n        $scriptx: VueScriptX\n    }\n}\n\nexport default new VueScriptX()\n"],
  "mappings": "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",
  "names": []
}
